$(document).ready(function(){fnOnChangeOperation();fnRegisterOwnBikeOnChange();fnbindRcCupCities();$('.racetracker-slider-box').slick({slidesToShow:3,autoplay:!1,autoplaySpeed:1000,arrows:!0,slidesToScroll:1,dots:!0,responsive:[{breakpoint:768,settings:{slidesToShow:1}},]});$('.campaign-specs').slick({slidesToShow:4,autoplay:!1,autoplaySpeed:1000,arrows:!0,dots:!1,slidesToScroll:1,dots:!0,responsive:[{breakpoint:768,settings:{slidesToShow:1}},]});$(".togglemenu").click(function(){$(".mainmenu").addClass("active-mobile-header")});$(".closemenu").click(function(){$(".mainmenu").removeClass("active-mobile-header")});if($(window).width()<767){$('.rc-cup-instagram-wrapper').slick({slidesToShow:1,arrows:!0,dots:!1,slidesToScroll:1,})}
$(function(){const $tabs=$(".tab-heading");const $contents=$(".tab-content");$tabs.click(function(){const index=$tabs.index(this);$tabs.removeClass("active-tab-item").eq(index).addClass("active-tab-item");$contents.hide().eq(index).show()}).first().click()});$(".headerrtright .watch-film a.watchresults").click(function(){$(".tab-03").click()});$('.owl-carousel').owlCarousel({loop:!0,autoplaySpeed:1000,autoplay:!1,nav:!1,responsive:{0:{items:1},600:{items:1},1000:{items:1}}});$(".ktm-close").click(function(){$(".ktm-popup").removeClass("active");$(".ktm-overlay").hide()});$(".inc-exc-btn").click(function(){var incexcbtn=$(this).attr('data-id');$(".inc-exc").removeClass("active");$("#"+incexcbtn).addClass("active");$(".ktm-overlay").show()});$(".ktm-close").click(function(){$(".inc-exc").removeClass("active");$(".ktm-overlay").hide()});$(function(){$('#fld_dob').datepicker({dateFormat:'dd/mm/yy',changeYear:!0,maxDate:'-18Y',yearRange:'1940:2005',})});$('#fld_own_bike').change(function(){if($(this).val()=="No"){$(".ktm-overlay").show()}});$(".ok-btn a, .close-popup").click(function(){$(".ktm-overlay").hide()})
showSelectedCityByDefault();$("#fld_bike_model1").change(function(){console.log($(this).children("option:selected").val());var thisCity=$(this).children("option:selected").val();showCityData(thisCity)});$(".standing-sec").each(function(index){$(this).click(function(){var setCity=$(this).attr("data-city-name");if(setCity=="mumbai"||setCity=="vadodara"||setCity=="delhi"||setCity=="ranchi"||setCity=="hyderabad"||setCity=="bangalore"||setCity=="coimbatore"){$("#fld_bike_model1").val(setCity);$("#fld_bike_model1").trigger("change")}
$('html, body').animate({scrollTop:$('#goto').offset().top},1000)})})});$(window).scroll(function(){if($(window).scrollTop()>=100){$('.headerWrap').addClass('fixed-header')}else{$('.headerWrap').removeClass('fixed-header')}});$(".showroom-btn").click(function(){$('html, body').animate({scrollTop:$(".registration-form").offset().top},2000)});function showSelectedCityByDefault(){$(".tab-content-table").hide();let value=$("#fld_bike_model1").children("option:selected").val();if(value)
$("#tbl_"+value.toLowerCase()).show();}
function fnSendOTP(){$(".erro-field").html("").hide();var hndlrurl="/handlers/ktm/rc-cup/requestVerification.ashx";var postData={"fld_name":$("#fld_name").val(),"fld_mobile":$("#fld_mobile").val(),};$.ajax({async:!0,url:hndlrurl,type:"post",data:postData,success:function(result){if(result.IsRequestSuccessfull){$(".otp-register-col").show();$(".otp-verify-block").hide();$("#fld_bike_otp_err").html("OTP has been sent").show();$("#fld_bike_otp_1").focus()}else{$("#"+result.ErrorField+"_err").html(result.Message).show()}},error:function(){console.log(" ")},beforeSend:function(){$(".overlay-loader").show()},complete:function(){$(".overlay-loader").hide()}})}
function fnVerifyOTP(){var OtpValue=$("#fld_bike_otp_1").val()+$("#fld_bike_otp_2").val()+$("#fld_bike_otp_3").val()+$("#fld_bike_otp_4").val();if(OtpValue.length==4){fnPerformVerification(OtpValue)}}
function fnPerformVerification(verifyOtp){$(".erro-field").html("").hide();var hndlrurl="/handlers/ktm/rc-cup/performVerification.ashx";var postData={"fld_mobile":$("#fld_mobile").val(),"fld_otp":verifyOtp};$.ajax({async:!0,url:hndlrurl,type:"post",data:postData,success:function(result){if(result.IsRequestSuccessfull){$("#fld_bike_otp_verified").val("y");$("#fld_mobile_err").html("OTP Verified").show().css("color","#008000");$(".otp-register-col").remove()}else{$("#fld_bike_otp_err").html(result.Message).show();$("#fld_bike_otp_1,#fld_bike_otp_2,#fld_bike_otp_3,#fld_bike_otp_4").val("");$("#fld_bike_otp_1").focus()}},error:function(){console.log(" ")},beforeSend:function(){$(".overlay-loader").show()},complete:function(){$(".overlay-loader").hide();$("#fld_bike_otp_1").focus()}})}
function fnSubmitRcCupFirstForm(){$(".erro-field").hide();var hndlrurl="/handlers/ktm/rc-cup/submit-rc-cup-details.ashx";var postData={"fld_name":$("#fld_name").val(),"fld_mobile":$("#fld_mobile").val(),"fld_location":$("#fld_location").val(),"fld_participation_location_1":$("#fld_participation_location_1 option:selected").text(),"fld_participation_city":$("#fld_participation_location_1").val(),"fld_brand":$("#fld_brand").val(),"fld_operation":$("input[name=fld_operation]:checked").val(),"fld_wp_consent":$("input[name=chk_bike_wp_consent]:checked").val(),"fld_terms_condition":$("input[name=chk_bike_terms_condition]").is(":checked")?"y":"n",};$.ajax({async:!0,url:hndlrurl,type:"post",data:postData,success:function(result){if(result.status=="success"){$(".rg-form-1").hide();$(".thank-you-message-box-wrapper").show();$("#fld_Citylocation").val($("#fld_participation_location_1 option:selected").text());if($("input[name=fld_operation]:checked").val()=="Book Slot"){var e_model=document.querySelector(".fld_modelN");let b_form_1=document.querySelector(".rg-form-1");let b_form_2=document.querySelector(".rg-form-2");let b_form_3=document.querySelector(".rg-form-3");var texte=e_model.options[e_model.selectedIndex].text;if(texte=="Others"){b_form_1.style.display="none";b_form_2.style.display="none";b_form_3.style.display="block"}else{b_form_1.style.display="none";b_form_2.style.display="block";$(".thank-you-message-box-wrapper").hide();fnbindSlotDate()}}else{$(".rg-form-1").hide();$(".thank-you-message-box-wrapper").show()}}else if(result.status=="fail"){$("#"+result.errorField+"_err").html(result.errorMessage).show();$("#"+result.errorField).focus()}else{alert(result.errorMessage)}},error:function(){console.log(" ")},beforeSend:function(){$(".overlay-loader").show()},complete:function(){$(".overlay-loader").hide()}})}
function fnOnChangeOperation(){$('input[type=radio][name=fld_operation]').change(function(){if(this.value=="Call Back"){$(".btnSubmitDetailsN").text('Submit')}else if(this.value=="Book Slot"){$(".btnSubmitDetailsN").text("Proceed")}})}
$(".chassis-ktm-close").click(function(){$("#chassis").hide()})
var licenseFile;$("#fld_license_file,#file-upload-field").change(function(evt){$(".error-msg").hide();if(evt.target.files.length>0){var file=evt.target.files[0];if(validateUploadedFile(file)&&getFileSize(file)){$("#fileImagePreview").attr("src",URL.createObjectURL(file)).height(52).width(82)
licenseFile=file;console.log(file)
$(".file-upload").hide();$(".file-upload-lic").show()}}});function validateUploadedFile(objFile){var file=objFile.name.toLowerCase();var reg=/(.*?)\.(jpg|jpeg|pdf|doc|docx|png)$/;if(!file.match(reg)){$("#fld_dl_file_err").html(objFile.name+" is invalid file. Files are allowed with extensions jpg, jpeg, png, pdf, doc, docx").show();return!1}else return!0}
function getFileSize(objfile){if(Math.round(objfile.size/1024)>5*1024){$("#fld_dl_file_err").html(objfile.name+" has exceed the limit of upload. Max upload limit is 5 MB.").show();return!1}else return!0}
$("#fld_chassis_number").on('keypress',function(event){var regex=new RegExp("^[a-zA-Z0-9]+$");var key=String.fromCharCode(!event.charCode?event.which:event.charCode);if(!regex.test(key)){event.preventDefault();return!1}});function fnChassisNumberOnChange(){var chassis_number_length=$("#fld_chassis_number").val().length;if(chassis_number_length>4){$(".erro-field").hide();var formData=new FormData();formData.append("fld_chassis_number",$("#fld_chassis_number").val());var hndlrurl="/handlers/ktm/rc-cup/check-rc-cup-chassis-number.ashx";$.ajax({async:!0,url:hndlrurl,type:"post",data:formData,dataType:'json',contentType:!1,processData:!1,success:function(result){if(result.status=="success"){$("#chassis").hide()}else if(result.status=="fail"){$("#"+result.errorField+"_err").html(result.errorMessage).show();$("#"+result.errorField).focus();$("#chassis").show()}else{alert(result.errorMessage)}},error:function(){console.log(" ")},beforeSend:function(){$(".overlay-loader").show()},complete:function(){$(".overlay-loader").hide()}})}}
function fnSubmitChassisNumber(){$(".erro-field").hide();var formData=new FormData();formData.append("fld_name",$("#fld_name").val());formData.append("fld_mobile",$("#fld_mobile").val());formData.append("fld_location",$("#fld_location").val());formData.append("fld_brand",$("#fld_brand").val());formData.append("fld_operation",$("input[name=fld_operation]:checked").val());formData.append("fld_participation_location",$("#fld_participation_location_1 option:selected").text());formData.append("fld_chassis_number",$("#fld_chassis_number").val());formData.append("fld_hdn_license_file",licenseFile);var hndlrurl="/handlers/ktm/rc-cup/submit-rc-cup-chassis-number.ashx";$.ajax({async:!0,url:hndlrurl,type:"post",data:formData,dataType:'json',contentType:!1,processData:!1,success:function(result){if(result.status=="success"){$("#fld_hdn_license_file").val("chassis-number-uploaded")}else if(result.status=="fail"){$("#"+result.errorField+"_err").html(result.errorMessage).show();$("#"+result.errorField).focus()}else{alert(result.errorMessage)}},error:function(){console.log(" ")},beforeSend:function(){$(".overlay-loader").show()},complete:function(){$(".overlay-loader").hide()}})}
function fnRegisterOwnBikeOnChange(){$('#fld_own_bike').on('change',function(){var selectedvalue=$(this).val();if(selectedvalue=="Yes"){$("#divDropdown").show();$("#divTextBox").hide()}else if(selectedvalue=="No"){$("#divDropdown").hide();$("#divTextBox").show()}})}
function fnbindRcCupCities(){var citiesData="";var arrcitiesJson;$.ajax({async:!1,dataType:"json",url:"/handlers/ktm/rc-cup/get-rc-cup-cities.ashx",success:function(result){arrcitiesJson=result},error:function(){},})
citiesData="<option value=''>Select</option>";for(var index=0;index<arrcitiesJson.length;index++){citiesData+="<option value='"+arrcitiesJson[index].cityId+"'>"+arrcitiesJson[index].cityname+"</option>"}
$("#fld_participation_location_1").html(citiesData)}
function fnbindSlotDate(){var slotDateData="";var arrslotDateJson;var postData={"cityId":$("#fld_participation_location_1").val()}
$.ajax({async:!1,data:postData,dataType:"json",url:"/handlers/ktm/rc-cup/get-slot-date.ashx",success:function(result){arrslotDateJson=result},error:function(){},})
slotDateData="<option value=''>Select Date</option>";for(var index=0;index<arrslotDateJson.length;index++){slotDateData+="<option value='"+arrslotDateJson[index].slot_date+"'>"+arrslotDateJson[index].slot_date+"</option>"}
$("#fld_slot_date").html(slotDateData)}
function fnbindSlotTime(){var slotTimeData="";var arrSlotTimeJson;var postData={"city_id":$("#fld_participation_location_1").val(),"slot_date":$("#fld_slot_date").val()}
$.ajax({async:!1,data:postData,dataType:"json",url:"/handlers/ktm/rc-cup/get-slot-time.ashx",success:function(result){arrSlotTimeJson=result},error:function(){},})
slotTimeData="<option value=''>Select Time</option>";for(var index=0;index<arrSlotTimeJson.length;index++){slotTimeData+="<option value='"+arrSlotTimeJson[index].slot_id+"'>"+arrSlotTimeJson[index].slot_time+"</option>"}
$("#fld_slot_time").html(slotTimeData)}
function fnbindGearTypeDetails(){fnbindRidingJacket();fnbindRidingPants();fnbindRidingBoots()}
function fnbindRidingJacket(){var slotTimeData="";var arrSlotTimeJson;let handler=$("#fld_participation_location_1").val()=='7'?"handlers/ktm/rc-cup/get-riding-racing-suit.ashx":"/handlers/ktm/rc-cup/get-riding-jacket.ashx";var postData={"slot_id":$("#fld_slot_time").val()}
$.ajax({async:!1,data:postData,dataType:"json",url:handler,success:function(result){arrSlotTimeJson=result},error:function(){},})
slotTimeData="<option value=''>Select your Riding Jacket</option>";for(var index=0;index<arrSlotTimeJson.length;index++){slotTimeData+="<option value='"+arrSlotTimeJson[index].gear_size+"'>"+arrSlotTimeJson[index].gear_size+"</option>"}
slotTimeData+="<option value='arrange my own'>I will arrange my own</option>";$("#fld_riding_suit").html(slotTimeData)}
function fnbindRidingPants(){var slotTimeData="";var arrSlotTimeJson;var postData={"slot_id":$("#fld_slot_time").val()}
$.ajax({async:!1,data:postData,dataType:"json",url:"/handlers/ktm/rc-cup/get-riding-pant.ashx",success:function(result){arrSlotTimeJson=result},error:function(){},})
slotTimeData="<option value=''>Riding Pants Selection</option>";for(var index=0;index<arrSlotTimeJson.length;index++){slotTimeData+="<option value='"+arrSlotTimeJson[index].gear_size+"'>"+arrSlotTimeJson[index].gear_size+"</option>"}
slotTimeData+="<option value='arrange my own'>I will arrange my own</option>";$("#fld_riding_pants").html(slotTimeData)}
function fnbindRidingBoots(){var slotTimeData="";var arrSlotTimeJson;let handler=$("#fld_participation_location_1").val()=='7'?"handlers/ktm/rc-cup/get-riding-racing-shoes.ashx":"/handlers/ktm/rc-cup/get-riding-boots.ashx";var postData={"slot_id":$("#fld_slot_time").val()}
$.ajax({async:!1,data:postData,dataType:"json",url:handler,success:function(result){arrSlotTimeJson=result},error:function(){},})
slotTimeData="<option value=''>Riding Boots Selection</option>";for(var index=0;index<arrSlotTimeJson.length;index++){slotTimeData+="<option value='"+arrSlotTimeJson[index].gear_size+"'>"+arrSlotTimeJson[index].gear_size+"</option>"}
slotTimeData+="<option value='arrange my own'>I will arrange my own</option>";$("#fld_riding_shoes").html(slotTimeData)}
function fnSubmitBookYourSlot(){$(".erro-field").hide();var formData=new FormData();formData.append("fld_own_bike",$("#fld_own_bike").val());formData.append("fld_model",$("#fld_model").val());formData.append("fld_relationwithowner",$("#fld_relationwithowner").val());formData.append("fld_chassis_number",$("#fld_chassis_number").val());formData.append("fld_email",$("#fld_email").val());formData.append("fld_dob",$("#fld_dob").val());formData.append("fld_license_number",$("#fld_license_number").val());formData.append("fld_emergency_contact_number",$("#fld_emergency_contact_number").val());formData.append("fld_relationship",$("#fld_relationship").val());formData.append("fld_slot_date",$("#fld_slot_date").val());formData.append("fld_slot_time",$("#fld_slot_time").val());formData.append("fld_insta_handle",$("#fld_insta_handle").val());formData.append("fld_riding_suit",$("#fld_riding_suit").val());formData.append("fld_riding_pants",$("#fld_riding_pants").val());formData.append("fld_riding_shoes",$("#fld_riding_shoes").val());formData.append("fld_consent",$("input[name=fld_consent]:checked").val());formData.append("fld_agree_consent",$("input[name=fld_agree_consent]:checked").val());formData.append("fld_hdn_license_file",$("#fld_hdn_license_file").val());var hndlrurl="/handlers/ktm/rc-cup/submit-rc-cup-slot.ashx";$.ajax({async:!0,url:hndlrurl,type:"post",data:formData,dataType:'json',contentType:!1,processData:!1,success:function(result){if(result.status=="success"){window.location="/ktmrccup/payment"}else if(result.status=="fail"){$("#"+result.errorField+"_err").html(result.errorMessage).show();$("#"+result.errorField).focus()}else{alert(result.errorMessage)}},error:function(){console.log(" ")},beforeSend:function(){$(".overlay-loader").show()},complete:function(){$(".overlay-loader").hide()}})}
function fnSubmitOtherBookYourSlot(){$(".erro-field").hide();var formData=new FormData();formData.append("fld_other_participation_location",$("#fld_other_participation_location").val());formData.append("fld_other_own_bike",$("#fld_other_own_bike").val());formData.append("fld_other_model",$("#fld_other_model").val());formData.append("fld_other_chassis_number",$("#fld_other_chassis_number").val());formData.append("fld_other_email",$("#fld_other_email").val());formData.append("fld_other_dob",$("#fld_other_dob").val());formData.append("fld_other_emergency_contact_number",$("#fld_other_emergency_contact_number").val());formData.append("fld_other_relationship",$("#fld_other_relationship").val());formData.append("fld_other_insta_handle",$("#fld_other_insta_handle").val());formData.append("fld_other_riding_suit",$("#fld_other_riding_suit").val());formData.append("fld_other_riding_shoes",$("#fld_other_riding_shoes").val());formData.append("fld_other_consent",$("input[name=fld_other_consent]:checked").val());var files=document.getElementById("fld_other_license_file").files;for(var i=0;i<files.length;i++){formData.append(files[i].name,files[i])}
var rcfiles=document.getElementById("fld_other_rc_file").files;for(var i=0;i<rcfiles.length;i++){formData.append(rcfiles[i].name,rcfiles[i])}
var hndlrurl="/handlers/ktm/rc-cup/submit-rc-cup-other-slot.ashx";$.ajax({async:!0,url:hndlrurl,type:"post",data:formData,dataType:'json',contentType:!1,processData:!1,success:function(result){if(result.status=="success"){window.location="/ktmrccup/payment"}else if(result.status=="fail"){$("#"+result.errorField+"_err").html(result.errorMessage).show();$("#"+result.errorField).focus()}else{alert(result.errorMessage)}},error:function(){console.log(" ")},beforeSend:function(){$(".overlay-loader").show()},complete:function(){$(".overlay-loader").hide()}})}
function showCityData(selected_city){$(".tab-content-table").hide();$("#tbl_"+selected_city.toLowerCase()).show()}
var inp=$(".otp-field");inp.on({paste(ev){const clip=ev.originalEvent.clipboardData.getData('text').trim();if(!/\d{6}/.test(clip))return ev.preventDefault();const s=[...clip];inp.val(i=>s[i]).eq(5).focus()},input(ev){const i=inp.index(this);if(this.value)inp.eq(i+1).focus();},keydown(ev){const i=inp.index(this);if(!this.value&&ev.key==="Backspace"&&i)inp.eq(i-1).focus();}});function fnNotify(){$(".error-notify-msg").hide();var hndlrurl="/handlers/ktm/rc-cup/ktm-rc-cup-send-message.ashx";var postData={"email_notify":$("#fld_rccup_notify").val()};$.ajax({async:!0,url:hndlrurl,type:"post",data:postData,success:function(result){if(result.IsRequestSuccessfull){$("#fld_rccup_notify").val("");$("#fld_rccup_notify_err").html("Great! You just got access to 7 hours of Racing Action. Link in your mailbox.").show().css("color","#ffffff")}else{$("#"+result.ErrorField+"_err").html(result.Message).show();$("#"+result.ErrorField).focus()}},error:function(){console.log(" ")},beforeSend:function(){$(".overlay-loader").show()},complete:function(){$(".overlay-loader").hide();$("#fld_rccup_notify").val("");$("#fld_rccup_notify").focus()}})}
function getNeverEndingDate(){let tom=new Date("March 26,2023 00:00:00");tom.setDate(tom.getDate()+1);return tom.setHours(0,0,0,0)}
var countDownDate=getNeverEndingDate();var x=setInterval(function(){var now=new Date().getTime();var distance=countDownDate-now;var days=Math.floor(distance/(1000*60*60*24));var hours=Math.floor((distance%(1000*60*60*24))/(1000*60*60));var minutes=Math.floor((distance%(1000*60*60))/(1000*60));var seconds=Math.floor((distance%(1000*60))/1000);document.getElementById("ktm-rc-timer").innerHTML=days+"d "+hours+"h "+minutes+"m "+seconds+"s ";if(distance<0){countDownDate=getNeverEndingDate()}},1000)